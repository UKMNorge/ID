# id
ID-portal for UKM.no

![Midlertidig flytskjema](Flytskjema.png?raw=true)
[rediger flytskjema](https://app.diagrams.net/)



# API

## Authorization

Authorization of a client by providing credentials of the client

```http
POST /api/auth.php
```

| Parameter | Type | Description | Accepted values
| :--- | :--- | :--- | :----|
| `grant_type` | `string` | **Required**. Type of the grant | 'password'
| `client_id` | `string` | **Required**. Client id |
| `client_secret` | `string` | **Required**. Client secret |
| `state` | `string` | **Required**. Nonce (key) generated from client |
| `return_to` | `string` | **Required**. The url of the client to redirect the user |


### Response

```javascript
{
    'access_token'  : 'string',
    'expires_in'    : 'int',
    'refresh_token' : 'string',
    'scope'         : 'string',
    'token_type'    : "Bearer",
    'return_to'     : 'string'
    'state'         : 'string'
}
```
`access_token` token generated by authenticate. It can be used to validate the authentication process afterwards
`return_to` the link where the user should be redirected
`expires_in` how much time the authorization is available
`refresh_token`
`scope`
`token_type`
`state` nonce generated by the cliend and verified by authenticate



## Verify Access Token

Verify the access token after the user delivers the `access_token` to client

```http
POST /api/verify-access-token.php
```

| Parameter | Type | Description
| :--- | :--- | :--- | 
| `access_token` | `string` | **Required**. Access token  |
| `state` | `string` | **Required**. Nonce (key) generated from client |


### Response

```javascript
{
    "result" : 'boolean',
}
```
`result` the result of the request


# Status Codes Description 

| Status Code | Description |
| :--- | :--- |
| 200 | `OK` |
| 201 | `CREATED` |
| 400 | `BAD REQUEST` |
| 401 | `UNAUTHORIZED` |
| 403 | `UNAUTHORIZED - you donâ€™t have permission access on this server` |
| 404 | `NOT FOUND` |
| 500 | `INTERNAL SERVER ERROR` |

